name: Deploy Vue.js App

on:
  push:
    branches: [ main ]

jobs:
  deploy:
    name: Deploy to self-hosted server
    runs-on: self-hosted   # üî• Your server runner
    steps:
      # 1Ô∏è‚É£ Checkout code
      - name: Checkout repository
        uses: actions/checkout@v5

      # 2Ô∏è‚É£ Set up Docker (in case your runner needs it)
      - name: Set up Docker
        uses: docker/setup-buildx-action@v4

      # 3Ô∏è‚É£ Build Docker image
      - name: Build Docker image
        run: |
          docker build -t my-vue-app:latest ./github-action-tetst

      # 4Ô∏è‚É£ (Optional) Use Docker Compose for multi-container apps
      - name: Deploy with Docker Compose
        run: |
          docker compose down
          docker compose up -d --build

      # 5Ô∏è‚É£ (Optional) Clean up old images
      - name: Cleanup old images
        run: |
          docker image prune -f
